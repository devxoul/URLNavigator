language: objective-c
osx_image: xcode8.3
jobs:
  include:
    - stage: build
      script:
      - set -o pipefail && xcodebuild test
        -scheme "URLNavigator"
        -destination "platform=iOS Simulator,name=iPhone 7,OS=10.3.1"
        -sdk iphonesimulator
        CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO | xcpretty -c
      script:
      - set -o pipefail && xcodebuild test
        -scheme "URLNavigator-tvOS"
        -destination "platform=tvOS Simulator,name=Apple TV 1080p,OS=10.2
        -sdk appletvsimulator
        CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO | xcpretty -c
    - stage: code_coverage
      after_success:
        - bash <(curl -s https://codecov.io/bash) -J 'URLNavigator'
        - bash <(curl -s https://codecov.io/bash) -J 'URLNavigator-tvOS'
